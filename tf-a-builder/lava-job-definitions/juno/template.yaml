device_type: juno

job_name: tf-a-builder

timeouts:
  job:
    minutes: 30
  action:
    minutes: 5
  actions:
    u-boot-interrupt:
      seconds: 120
    u-boot-commands:
      seconds: 120
    uboot-retry:
      seconds: 180
  connections:
    u-boot-interrupt:
      seconds: 120
    u-boot-commands:
      seconds: 120
    uboot-retry:
      seconds: 180

priority: medium
visibility: public

actions:

- deploy:
    namespace: recovery
    timeout:
      minutes: 10
    to: vemsd
    recovery_image:
      url: ${BUILD_URL}/artifact/artefacts/debug/juno_recovery.zip
      compression: zip

- deploy:
    namespace: target
    timeout:
      minutes: 2
    to: nfs
    os: debian
    nfsrootfs:
      url: http://releases.linaro.org/openembedded/aarch64/17.01/linaro-image-minimal-genericarmv8-20170127-888.rootfs.tar.gz
      compression: gz

- boot:
    namespace: target
    connection-namespace: recovery
    method: u-boot
    commands: norflash
    auto_login:
      login_prompt: 'login:'
      username: root
    prompts:
    - root@(.*):~#

metadata:
  gerrit project: ${GERRIT_PROJECT}
  gerrit branch: ${GERRIT_BRANCH}
  gerrit refspec: ${GERRIT_REFSPEC}
  test groups: ${test_groups}
  build url: ${BUILD_URL}
